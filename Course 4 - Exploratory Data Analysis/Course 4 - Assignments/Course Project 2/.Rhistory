getwd()
setwd("D:/Software Engineering/Coding/DataScience/Course 3 - Getting and Cleaning Data/Course 3 - Lessons")
if(!file.exists("data")){
dir.create("data")
}
fileURL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
download.file(fileURL, destfile = "./data/data1.zip", method = "curl")
list.files("./data")
dateDownload
dateDownload <- date()
dateDownload
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.csv?accesstype=DOWNLOAD"
download.file(fileURL, destfile = "./data/cameras.csv", method = "curl")
list.files("./data")
dateDownload <- date()
cameraData <- read.table("./data/cameras.csv")
cameraData <- read.table("./data/cameras.csv", sep = ",", header = TRUE)
head(cameraData)
cameraData <- read.csv("./data/cameras.csv")
head(cameraData)
##### read excel files
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.xlxs?accesstype=DOWNLOAD"
download.file(fileURL, destfile = "./data/cameras.xlxs", method = "curl")
list.files("./data")
dateDownloaded <- date()
dateDownloaded
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
head(cameraData)
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.xlxs?accesstype=DOWNLOAD"
download.file(fileURL, destfile = "./data/cameras.xlsx", method = "curl")
list.files("./data")
dateDownloaded <- date()
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
head(cameraData)
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
head(cameraData)
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
head(cameraData)
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.xlsx?accesstype=DOWNLOAD"
download.file(fileURL, destfile = "./data/cameras.xlsx", method = "curl")
list.files("./data")
dateDownloaded <- date()
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.xlsx?accesstype=DOWNLOAD"
download.file(fileURL, destfile = "./data/cameras.xlsx", method = "curl")
list.files("./data")
dateDownloaded <- date()
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlxs", sheetIndex = 1, header = TRUE)
head(cameraData)
cameraData <- read.xlsx("./data/cameras.xlsx", sheetIndex = 1, header = TRUE)
head(cameraData)
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.xlsx?accesstype=DOWNLOAD"
download.file(fileURL, destfile = "./data/cameras.xlsx", method = "curl")
list.files("./data")
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlsx", sheetIndex = 1, header = TRUE)
library(xlsx)
cameraData <- read.xlsx("./data/cameras.xlsx", sheetIndex = 1, header = TRUE)
)
library(xml)
library(XML)
install.packages("XML")
library(XML)
library(XML)
fileURL <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileURL)
rootNode <- xmlRoot(doc)
xmlName(rootNode)
library(XML)
fileUrl <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileUrl,useInternal=TRUE)
rootNode <- xmlRoot(doc)
xmlName(rootNode)
names(rootNode)
doc <- xmlTreeParse(fileUrl,useInternal=TRUE)
library(XML)
fileUrl <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileUrl, useInternalNodes=TRUE)
library(xml2)
fileUrl <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileUrl, useInternalNodes=TRUE)
doc <- xmlParse(fileUrl, useInternalNodes=TRUE)
doc <- xmlParse(fileUrl, useInternalNodes = TRUE)
fileUrl <- "http://www.w3schools.com/xml/simple.xml"
fileURL <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlParse(fileURL, useInternalNodes = TRUE)
fileURL <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlParse(fileURL, useInternalNodes = TRUE)
doc <- xmlTreeParse(fileURL, useInternalNodes = TRUE)
doc <- read_xml(fileURL)
rootNode <- xmlRoot(doc)
xmlName(rootNode)
names(rootNode)
rootNode <- xmlRoot(doc)
doc
rootNode <- xmlRoot(doc)
library(xml)
fileURL <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileURL, useInternalNodes = TRUE)
doc <- read_xml(fileURL)
rootNode <- xmlRoot(doc)
xmlName(rootNode)
names(rootNode)
library(xml)
fileURL <- "http://www.w3schools.com/xml/simple.xml"
download.file(fileUrl, destfile = "./data/simple.xml")
doc <- xmlTreeParse("./data/simple.xml", useInternalNodes = TRUE)
rootNode <- xmlRoot(doc)
xmlName(rootNode)
names(rootNode)
rootNode[[1]]
rootNode[[1]][[1]]
rootNode[[1]][[2]]
xmlSApply(rootNode, xmlValue)
xpathSApply(rootNode, "//name", xmlValue)
xpathSApply(rootNode, "//price", xmlValue)
fileUrl <- "http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens"
doc <- htmlTreeParse(fileUrl,useInternal=TRUE)
scores <- xpathSApply(doc,"//li[@class='score']",xmlValue)
teams <- xpathSApply(doc,"//li[@class='team-name']",xmlValue)
scores
scores
doc
teams
fileUrl <- "http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens"
doc <- htmlTreeParse(fileUrl,useInternal=TRUE)
scores <- xpathSApply(doc,"//li[@class='score']",xmlValue)
teams <- xpathSApply(doc,"//li[@class='team-name']",xmlValue)
scores
teams
download.file(fileUrl, destfile = "./data/scores.xml")
fileUrl <- "http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens"
download.file(fileUrl, destfile = "./data/scores.xml")
doc <- htmlTreeParse("./data/scores.xml",useInternal=TRUE)
scores <- xpathSApply(doc,"//li[@class='score']",xmlValue)
teams <- xpathSApply(doc,"//li[@class='team-name']",xmlValue)
scores
teams
# read data
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
setwd("D:/Software Engineering/Coding/DataScience/Course 4 - Exploratory Data Analysis/Course 4 - Assignments/Course Project 2")
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
### Question 1 - total emissions from PM2.5 decreased in the United States from 1999 to 2008
# sum emissions by years
sum.emis <- with(NEI, tapply(Emissions, year, sum));
# create dataframe of years and emissions in kilotons
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Total Emissions in The US (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.5)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "blue")
bar <- barplot(df$emis, names.arg = df$year,
main = "Total Emissions in The US (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot1.png", width = 480, height = 480)
dev.off()
### Question 2 -  total emissions from PM2.5 in the Baltimore City, Maryland from 1999 to 2008
# sub dataframe of Baltimore City
sdf <- subset(NEI, fips == "24510")
# sum emissions in Baltimore by year
sum.emis <- with(sdf, tapply(Emissions, year, sum))
# create dataframe of year and emissions in kilotons in Baltimore
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Emissions in Baltimore City, Maryland (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "red")
# copy to png
dev.copy(png, file = "plot2.png", width = 480, height = 480)
dev.off()
### Question 4 - Across the United States, emissions from coal combustion-related sources in 1999-2008
# SCCs list of coal combustion
SCC$EI.Sector <- as.character(SCC$EI.Sector)
coal_logic <- grepl("COAL", toupper(SCC$EI.Sector))
coal <- subset(SCC, coal_logic)
coal_scc <- unique(coal$SCC)
# subset of NEI on coal combustion
coal_df <- subset(NEI, SCC %in% coal_scc)
# sum coal emissions by years
sum.emis <- with(coal_df, tapply(Emissions, year, sum))
# create dataframe of year and coal emissions in kilotons
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Emissions From Coal Combustion-Related Sources (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot4.png", width = 480, height = 480)
dev.off()
### Question 5 - Emissions from motor vehicle sources from 1999-2008 in Baltimore City
# SCCs list of motor vehicle sources
SCC$EI.Sector <- as.character(SCC$EI.Sector)
mobile_logic <- grepl("VEHICLES", toupper(SCC$EI.Sector))
mobile <- subset(SCC, mobile_logic)
mobile_scc <- unique(mobile$SCC)
# data of Baltimore & emissions from motor vehicle sources
mb_df <- subset(NEI, fips == "24510" & SCC %in% mobile_scc)
# sum emissions by years in Baltimore
sum.emis <- with(mb_df, tapply(Emissions, year, sum))
# create dataframe of year and emissions from motor vehicle sources in Baltimore
df <- data.frame(year = names(sum.emis), emis = sum.emis)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Motor Vehicle Emissions in Baltimore (tons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (tons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/3, label = format(round(df$emis,0), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot5.png", width = 480, height = 480)
dev.off()
### Question 1 - total emissions from PM2.5 decreased in the United States from 1999 to 2008
# sum emissions by years
sum.emis <- with(NEI, tapply(Emissions, year, sum));
# create dataframe of years and emissions in kilotons
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Total Emissions in The US (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot1.png", width = 480, height = 480)
dev.off()
### Question 2 -  total emissions from PM2.5 in the Baltimore City, Maryland from 1999 to 2008
# sub dataframe of Baltimore City
sdf <- subset(NEI, fips == "24510")
# sum emissions in Baltimore by year
sum.emis <- with(sdf, tapply(Emissions, year, sum))
# create dataframe of year and emissions in kilotons in Baltimore
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Emissions in Baltimore City, Maryland (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "red")
# copy to png
dev.copy(png, file = "plot2.png", width = 480, height = 480)
dev.off()
### Question 3 - emissions by type in the Baltimore City, Maryland from 1999 to 2008
# prepare libraries
library(dplyr)
library(ggplot2)
# sub dataframe of Baltimore City
sdf <- subset(NEI, fips == "24510")
# sum emissions in Baltimore by years & types
groups <- group_by(sdf, type, year = as.character(year))
sum.emis <- summarize(groups, emis = sum(Emissions))
# ggplot
g <- ggplot(sum.emis, aes(year, emis, label = round(emis,0)))
# add components
g + geom_bar(stat="identity") + facet_grid(. ~ type) +
geom_text(aes(label=format(round(emis,0), big.mark =",")), vjust=-0.3, color="blue", size=3) +
labs(y = expression("PM"[2.5]*" emissions (tons)")) +
ggtitle("Emissions in Baltimore City by Source Types (tons)")
# copy to png
dev.copy(png, file = "plot3.png", width = 480, height = 480)
dev.off()
### Question 4 - Across the United States, emissions from coal combustion-related sources in 1999-2008
# SCCs list of coal combustion
SCC$EI.Sector <- as.character(SCC$EI.Sector)
coal_logic <- grepl("COAL", toupper(SCC$EI.Sector))
coal <- subset(SCC, coal_logic)
coal_scc <- unique(coal$SCC)
# subset of NEI on coal combustion
coal_df <- subset(NEI, SCC %in% coal_scc)
# sum coal emissions by years
sum.emis <- with(coal_df, tapply(Emissions, year, sum))
# create dataframe of year and coal emissions in kilotons
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Emissions From Coal Combustion-Related Sources (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot4.png", width = 480, height = 480)
dev.off()
### Question 5 - Emissions from motor vehicle sources from 1999-2008 in Baltimore City
# SCCs list of motor vehicle sources
SCC$EI.Sector <- as.character(SCC$EI.Sector)
mobile_logic <- grepl("VEHICLES", toupper(SCC$EI.Sector))
mobile <- subset(SCC, mobile_logic)
mobile_scc <- unique(mobile$SCC)
# data of Baltimore & emissions from motor vehicle sources
mb_df <- subset(NEI, fips == "24510" & SCC %in% mobile_scc)
# sum emissions by years in Baltimore
sum.emis <- with(mb_df, tapply(Emissions, year, sum))
# create dataframe of year and emissions from motor vehicle sources in Baltimore
df <- data.frame(year = names(sum.emis), emis = sum.emis)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Motor Vehicle Emissions in Baltimore (tons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (tons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/3, label = format(round(df$emis,0), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot5.png", width = 480, height = 480)
dev.off()
### Question 6 - Emissions from motor vehicle sources from 1999-2008 in Baltimore City & Los Angeles County
# SCCs list of motor vehicle sources
SCC$EI.Sector <- as.character(SCC$EI.Sector)
mobile_logic <- grepl("VEHICLES", toupper(SCC$EI.Sector))
mobile <- subset(SCC, mobile_logic)
mobile_scc <- unique(mobile$SCC)
# data of (Bal, Los) & motor vehicle sources
mb_df <- subset(NEI, (fips == "24510" | fips == "06037") & SCC %in% mobile_scc)
# sum emissions from motor vehicle sources on fips and years
groups <- group_by(mb_df, fips, year = as.character(year))
sum.emis <- summarize(groups, emis = sum(Emissions))
# add an variable 'city' of Baltimore & Los Angeles to dataframe sum.emis
sum.emis$city <- ifelse(sum.emis$fips == "24510", "Baltimore", "Los Angeles")
#ggplot
g <- ggplot(sum.emis, aes(year, emis,label = round(emis,0)))
# add components
g + geom_bar(stat="identity") + facet_grid(. ~ city) +
geom_text(aes(label=format(round(emis,0), big.mark =",")), vjust=-0.3, color="blue", size=3) +
labs(x = "Year", y = expression("PM"[2.5]*" emissions (tons)")) +
ggtitle("Motor Vehicle Emissions in Baltimore and Los Angeles (tons)")
# copy to png
dev.copy(png, file = "plot6.png", width = 480, height = 480)
dev.off()
### Question 1 - total emissions from PM2.5 decreased in the United States from 1999 to 2008
# sum emissions by years
sum.emis <- with(NEI, tapply(Emissions, year, sum));
# create dataframe of years and emissions in kilotons
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Total Emissions in The US (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot1.png", width = 480, height = 480)
dev.off()
### Question 2 -  total emissions from PM2.5 in the Baltimore City, Maryland from 1999 to 2008
# sub dataframe of Baltimore City
sdf <- subset(NEI, fips == "24510")
# sum emissions in Baltimore by year
sum.emis <- with(sdf, tapply(Emissions, year, sum))
# create dataframe of year and emissions in kilotons in Baltimore
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Emissions in Baltimore City, Maryland (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "red")
# copy to png
dev.copy(png, file = "plot2.png", width = 480, height = 480)
dev.off()
### Question 3 - emissions by type in the Baltimore City, Maryland from 1999 to 2008
# prepare libraries
library(dplyr)
library(ggplot2)
# sub dataframe of Baltimore City
sdf <- subset(NEI, fips == "24510")
# sum emissions in Baltimore by years & types
groups <- group_by(sdf, type, year = as.character(year))
sum.emis <- summarize(groups, emis = sum(Emissions))
# ggplot
g <- ggplot(sum.emis, aes(year, emis, label = round(emis,0)))
# add components
g + geom_bar(stat="identity") + facet_grid(. ~ type) +
geom_text(aes(label=format(round(emis,0), big.mark =",")), vjust=-0.3, color="blue", size=3) +
labs(y = expression("PM"[2.5]*" emissions (tons)")) +
ggtitle("Emissions in Baltimore City by Source Types (tons)")
# copy to png
dev.copy(png, file = "plot3.png", width = 480, height = 480)
dev.off()
### Question 4 - Across the United States, emissions from coal combustion-related sources in 1999-2008
# SCCs list of coal combustion
SCC$EI.Sector <- as.character(SCC$EI.Sector)
coal_logic <- grepl("COAL", toupper(SCC$EI.Sector))
coal <- subset(SCC, coal_logic)
coal_scc <- unique(coal$SCC)
# subset of NEI on coal combustion
coal_df <- subset(NEI, SCC %in% coal_scc)
# sum coal emissions by years
sum.emis <- with(coal_df, tapply(Emissions, year, sum))
# create dataframe of year and coal emissions in kilotons
df <- data.frame(year = names(sum.emis), emis = sum.emis/1000)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Emissions From Coal Combustion-Related Sources (ktons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (ktons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/2, label = format(round(df$emis,2), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot4.png", width = 480, height = 480)
dev.off()
### Question 5 - Emissions from motor vehicle sources from 1999-2008 in Baltimore City
# SCCs list of motor vehicle sources
SCC$EI.Sector <- as.character(SCC$EI.Sector)
mobile_logic <- grepl("VEHICLES", toupper(SCC$EI.Sector))
mobile <- subset(SCC, mobile_logic)
mobile_scc <- unique(mobile$SCC)
# data of Baltimore & emissions from motor vehicle sources
mb_df <- subset(NEI, fips == "24510" & SCC %in% mobile_scc)
# sum emissions by years in Baltimore
sum.emis <- with(mb_df, tapply(Emissions, year, sum))
# create dataframe of year and emissions from motor vehicle sources in Baltimore
df <- data.frame(year = names(sum.emis), emis = sum.emis)
# barplot
bar <- barplot(df$emis, names.arg = df$year,
main = "Motor Vehicle Emissions in Baltimore (tons)",
xlab = "Year",
ylab = expression("PM"[2.5]*" emissions (tons)"),
space = 0.3)
# add values to bars
text(x = bar, y = df$emis/3, label = format(round(df$emis,0), big.mark =","), pos = 3, cex = 0.75, col = "blue")
# copy to png
dev.copy(png, file = "plot5.png", width = 480, height = 480)
dev.off()
### Question 6 - Emissions from motor vehicle sources from 1999-2008 in Baltimore City & Los Angeles County
# SCCs list of motor vehicle sources
SCC$EI.Sector <- as.character(SCC$EI.Sector)
mobile_logic <- grepl("VEHICLES", toupper(SCC$EI.Sector))
mobile <- subset(SCC, mobile_logic)
mobile_scc <- unique(mobile$SCC)
# data of (Bal, Los) & motor vehicle sources
mb_df <- subset(NEI, (fips == "24510" | fips == "06037") & SCC %in% mobile_scc)
# sum emissions from motor vehicle sources on fips and years
groups <- group_by(mb_df, fips, year = as.character(year))
sum.emis <- summarize(groups, emis = sum(Emissions))
# add an variable 'city' of Baltimore & Los Angeles to dataframe sum.emis
sum.emis$city <- ifelse(sum.emis$fips == "24510", "Baltimore", "Los Angeles")
#ggplot
g <- ggplot(sum.emis, aes(year, emis,label = round(emis,0)))
# add components
g + geom_bar(stat="identity") + facet_grid(. ~ city) +
geom_text(aes(label=format(round(emis,0), big.mark =",")), vjust=-0.3, color="blue", size=3) +
labs(x = "Year", y = expression("PM"[2.5]*" emissions (tons)")) +
ggtitle("Motor Vehicle Emissions in Baltimore and Los Angeles (tons)")
# copy to png
dev.copy(png, file = "plot6.png", width = 480, height = 480)
dev.off()
